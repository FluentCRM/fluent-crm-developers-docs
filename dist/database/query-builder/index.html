<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FluentCRM Query Builder | FluentCRM Developers</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/assets/img/logo.svg" color="#7742e6">
    <link rel="apple-touch-icon" href="/assets/img/logo.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,300;0,500;0,700;1,300;1,500;1,700&amp;display=auto">
    <meta name="description" content="Resources and tutorials for FluentCRM developers">
    <meta name="theme-color" content="#7742e6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/assets/img/icon.svg">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.d0afebfe.css" as="style"><link rel="preload" href="/assets/js/app.1cc69afb.js" as="script"><link rel="preload" href="/assets/js/4.50f88fe4.js" as="script"><link rel="preload" href="/assets/js/40.19b3e816.js" as="script"><link rel="preload" href="/assets/js/5.78087223.js" as="script"><link rel="prefetch" href="/assets/js/1.69405b5c.js"><link rel="prefetch" href="/assets/js/10.1cd0ad7f.js"><link rel="prefetch" href="/assets/js/11.f32c864f.js"><link rel="prefetch" href="/assets/js/12.08c75246.js"><link rel="prefetch" href="/assets/js/13.ee99093d.js"><link rel="prefetch" href="/assets/js/14.3a0a2a10.js"><link rel="prefetch" href="/assets/js/15.bde4bddd.js"><link rel="prefetch" href="/assets/js/16.312dfb3b.js"><link rel="prefetch" href="/assets/js/17.7e07a8cc.js"><link rel="prefetch" href="/assets/js/18.30e9f96a.js"><link rel="prefetch" href="/assets/js/19.9d721225.js"><link rel="prefetch" href="/assets/js/20.0810e773.js"><link rel="prefetch" href="/assets/js/21.a51f06d0.js"><link rel="prefetch" href="/assets/js/22.4b4f1731.js"><link rel="prefetch" href="/assets/js/23.093867ca.js"><link rel="prefetch" href="/assets/js/24.8a84dcde.js"><link rel="prefetch" href="/assets/js/25.3ac1d9da.js"><link rel="prefetch" href="/assets/js/26.cbb0ef4c.js"><link rel="prefetch" href="/assets/js/27.c16e90f9.js"><link rel="prefetch" href="/assets/js/28.79acb935.js"><link rel="prefetch" href="/assets/js/29.a2d57755.js"><link rel="prefetch" href="/assets/js/30.18800f35.js"><link rel="prefetch" href="/assets/js/31.2a59842a.js"><link rel="prefetch" href="/assets/js/32.60b55016.js"><link rel="prefetch" href="/assets/js/33.a94e688e.js"><link rel="prefetch" href="/assets/js/34.0ff54db3.js"><link rel="prefetch" href="/assets/js/35.19816c3d.js"><link rel="prefetch" href="/assets/js/36.688cda3c.js"><link rel="prefetch" href="/assets/js/37.e024b175.js"><link rel="prefetch" href="/assets/js/38.f05fa44e.js"><link rel="prefetch" href="/assets/js/39.737dd831.js"><link rel="prefetch" href="/assets/js/41.70cfbf57.js"><link rel="prefetch" href="/assets/js/42.fd0d0122.js"><link rel="prefetch" href="/assets/js/43.7205270f.js"><link rel="prefetch" href="/assets/js/44.fb0ba51f.js"><link rel="prefetch" href="/assets/js/45.27af2ab7.js"><link rel="prefetch" href="/assets/js/46.e6d2b375.js"><link rel="prefetch" href="/assets/js/47.a81764e1.js"><link rel="prefetch" href="/assets/js/48.f13b6329.js"><link rel="prefetch" href="/assets/js/49.fc10e579.js"><link rel="prefetch" href="/assets/js/50.80754d7e.js"><link rel="prefetch" href="/assets/js/51.7acb7f94.js"><link rel="prefetch" href="/assets/js/52.4fd8a6fc.js"><link rel="prefetch" href="/assets/js/53.dff9bdbe.js"><link rel="prefetch" href="/assets/js/54.12579f14.js"><link rel="prefetch" href="/assets/js/55.77553671.js"><link rel="prefetch" href="/assets/js/56.f938766a.js"><link rel="prefetch" href="/assets/js/57.ffab44b6.js"><link rel="prefetch" href="/assets/js/58.86afc0ff.js"><link rel="prefetch" href="/assets/js/59.556634ba.js"><link rel="prefetch" href="/assets/js/6.ad1ba60c.js"><link rel="prefetch" href="/assets/js/60.0ef6f2e4.js"><link rel="prefetch" href="/assets/js/61.a78d359c.js"><link rel="prefetch" href="/assets/js/62.fae5c1a8.js"><link rel="prefetch" href="/assets/js/63.9dc9086f.js"><link rel="prefetch" href="/assets/js/64.73cd7eb4.js"><link rel="prefetch" href="/assets/js/65.b19e28af.js"><link rel="prefetch" href="/assets/js/66.3a0df05f.js"><link rel="prefetch" href="/assets/js/67.83a70521.js"><link rel="prefetch" href="/assets/js/68.4fe511df.js"><link rel="prefetch" href="/assets/js/69.0d9d886a.js"><link rel="prefetch" href="/assets/js/7.3fc70b38.js"><link rel="prefetch" href="/assets/js/70.cb2ba26c.js"><link rel="prefetch" href="/assets/js/71.09bc5865.js"><link rel="prefetch" href="/assets/js/72.48fc84e2.js"><link rel="prefetch" href="/assets/js/73.04fef0ac.js"><link rel="prefetch" href="/assets/js/74.ea56a005.js"><link rel="prefetch" href="/assets/js/75.6c899132.js"><link rel="prefetch" href="/assets/js/76.12b268c1.js"><link rel="prefetch" href="/assets/js/77.aca7ddfa.js"><link rel="prefetch" href="/assets/js/78.46ada3cf.js"><link rel="prefetch" href="/assets/js/79.b5fa8919.js"><link rel="prefetch" href="/assets/js/8.a925eb1e.js"><link rel="prefetch" href="/assets/js/9.485e8673.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d31fbf91.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d0afebfe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/icon.svg" alt="FluentCRM Developers" class="logo"> <span class="site-name can-hide">FluentCRM Developers</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><span class="title">Database</span> <span class="arrow down"></span></button> <button type="button" aria-label="Database" class="mobile-dropdown-title"><span class="title">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/" class="nav-link router-link-active">
  Database Schema
</a></li><li class="dropdown-item"><!----> <a href="/database/models/" class="nav-link">
  Database Models
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Developer Hooks" class="dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Developer Hooks" class="mobile-dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hooks/actions/" class="nav-link">
  Action Hooks
</a></li><li class="dropdown-item"><!----> <a href="/hooks/filters/" class="nav-link">
  Filter Hooks
</a></li><li class="dropdown-item"><!----> <a href="/global-functions/" class="nav-link">
  Global Functions
</a></li><li class="dropdown-item"><!----> <a href="/helpers/" class="nav-link">
  Helpers Classes
</a></li><li class="dropdown-item"><!----> <a href="/cli/" class="nav-link">
  CLI
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Modules" class="dropdown-title"><span class="title">Modules</span> <span class="arrow down"></span></button> <button type="button" aria-label="Modules" class="mobile-dropdown-title"><span class="title">Modules</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/modules/automation/" class="nav-link">
  Automation
</a></li><li class="dropdown-item"><!----> <a href="/modules/smart-code/" class="nav-link">
  Smart Codes
</a></li><li class="dropdown-item"><!----> <a href="/modules/contact-profile-section/" class="nav-link">
  Contact's Profile
</a></li><li class="dropdown-item"><!----> <a href="/extending-rest-api/" class="nav-link">
  Extending REST API
</a></li></ul></div></div><div class="nav-item"><a href="https://fluentcrm.com/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://rest-api.fluentcrm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  REST API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/fluentcrm/fluent-crm-developers-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><span class="title">Database</span> <span class="arrow down"></span></button> <button type="button" aria-label="Database" class="mobile-dropdown-title"><span class="title">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/" class="nav-link router-link-active">
  Database Schema
</a></li><li class="dropdown-item"><!----> <a href="/database/models/" class="nav-link">
  Database Models
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Developer Hooks" class="dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Developer Hooks" class="mobile-dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hooks/actions/" class="nav-link">
  Action Hooks
</a></li><li class="dropdown-item"><!----> <a href="/hooks/filters/" class="nav-link">
  Filter Hooks
</a></li><li class="dropdown-item"><!----> <a href="/global-functions/" class="nav-link">
  Global Functions
</a></li><li class="dropdown-item"><!----> <a href="/helpers/" class="nav-link">
  Helpers Classes
</a></li><li class="dropdown-item"><!----> <a href="/cli/" class="nav-link">
  CLI
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Modules" class="dropdown-title"><span class="title">Modules</span> <span class="arrow down"></span></button> <button type="button" aria-label="Modules" class="mobile-dropdown-title"><span class="title">Modules</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/modules/automation/" class="nav-link">
  Automation
</a></li><li class="dropdown-item"><!----> <a href="/modules/smart-code/" class="nav-link">
  Smart Codes
</a></li><li class="dropdown-item"><!----> <a href="/modules/contact-profile-section/" class="nav-link">
  Contact's Profile
</a></li><li class="dropdown-item"><!----> <a href="/extending-rest-api/" class="nav-link">
  Extending REST API
</a></li></ul></div></div><div class="nav-item"><a href="https://fluentcrm.com/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://rest-api.fluentcrm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  REST API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/fluentcrm/fluent-crm-developers-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Database Schema</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/database/models/" class="sidebar-link">Model Basic</a></li><li><a href="/database/query-builder/" aria-current="page" class="active sidebar-link">Query Builder</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Database Models</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Fluent ORM</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fluentcrm-query-builder"><a href="#fluentcrm-query-builder" class="header-anchor">#</a> FluentCRM Query Builder</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Fluent's database query builder provides a convenient, fluent interface to creating and running database queries. It can be used to perform most database operations in your application.</p> <p><em>Note: Our Query Builder is compatible the PHP Laravel Framework's Query Builder. If you are familiar with Laravel's Query Builder, you will feel right at home using the FluentCRM's Query Builder.</em></p> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <p>Here is an example Fluent Query Builder</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relation_items'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'item_value'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'status'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'item_type'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'provider'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'woo'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'2022-12-05 00:00:00'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'2022-12-30 23:59:59'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token variable">$productId</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$productId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'item_id'</span><span class="token punctuation">,</span> <span class="token variable">$productId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'date'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'ASC'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="retrieving-results"><a href="#retrieving-results" class="header-anchor">#</a> Retrieving Results</h1> <h3 id="retrieving-all-rows-from-a-table"><a href="#retrieving-all-rows-from-a-table" class="header-anchor">#</a> Retrieving All Rows From A Table</h3> <p>You may use the <code>table</code> method on the <code>fluentCrmDb</code> function to begin a query. The <code>table</code> method returns a fluent query builder instance for the given table, allowing you to chain more constraints onto the query and then finally get the results using the <code>get</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token keyword">namespace</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Show a list of all the application's subscribers.
     *
     * @return Response
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'subscribers'</span> <span class="token operator">=&gt;</span> <span class="token variable">$subscribers</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>   
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>The <code>get</code> method returns an array containing the results where each result is an instance of the PHP stdClass object. You may access each column's value by accessing the column as a property of the object:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$subscribers</span> <span class="token keyword">as</span> <span class="token variable">$subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$subscriber</span><span class="token operator">-&gt;</span><span class="token property">first_name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="retrieving-a-single-row-column-from-a-table"><a href="#retrieving-a-single-row-column-from-a-table" class="header-anchor">#</a> Retrieving A Single Row / Column From A Table</h3> <p>If you just need to retrieve a single row from the database table, you may use the <code>first</code> method. This method will return a single stdClass object:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscriber</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'John'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">echo</span> <span class="token variable">$subscriber</span><span class="token operator">-&gt;</span><span class="token property">first_name</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>If you don't even need an entire row, you may extract a single value from a record using the <code>value</code> method. This method will return the value of the column directly:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$email</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'John'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="retrieving-a-list-of-column-values"><a href="#retrieving-a-list-of-column-values" class="header-anchor">#</a> Retrieving A List Of Column Values</h3> <p>If you would like to retrieve an array containing the values of a single column, you may use the <code>pluck</code> method. In this example, we'll retrieve an array of email:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$emails</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$emails</span> <span class="token keyword">as</span> <span class="token variable">$email</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$email</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You may also specify a custom key column for the returned Collection:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$emails</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$emails</span> <span class="token keyword">as</span> <span class="token variable">$id</span> <span class="token operator">=&gt;</span> <span class="token variable">$email</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$email</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="chunking-results"><a href="#chunking-results" class="header-anchor">#</a> Chunking Results</h3> <p>If you need to work with thousands of database records, consider using the <code>chunk</code> method. This method retrieves a small chunk of the results at a time and feeds each chunk into a Closure for processing. This method is very useful for process thousands of records. For example, let's work with the entire <code>fc_subscribers</code> table in chunks of 100 records at a time:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">chunk</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$subscribers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$subscribers</span> <span class="token keyword">as</span> <span class="token variable">$subscriber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You may stop further chunks from being processed by returning false from the Closure:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">chunk</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$subscribers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Process the records...</span>
    
    <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="aggregates"><a href="#aggregates" class="header-anchor">#</a> Aggregates</h3> <p>The query builder also provides a variety of aggregate methods such as <code>count</code>, <code>max</code>, <code>min</code>, <code>avg</code>, and <code>sum</code>. You may call any of these methods after constructing your query:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$price</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Of course, you may combine these methods with other clauses:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$price</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'provider'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'woo'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="determining-if-records-exist"><a href="#determining-if-records-exist" class="header-anchor">#</a> Determining If Records Exist</h3> <p>Instead of using the <code>count</code> method to determine if any records exist that match your query's constraints, you may use the <code>exists</code>:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'provider'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'woo'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="selects"><a href="#selects" class="header-anchor">#</a> Selects</h2> <h3 id="specifying-a-select-clause"><a href="#specifying-a-select-clause" class="header-anchor">#</a> Specifying A Select Clause</h3> <p>Of course, you may not always want to select all columns from a database table. Using the <code>select</code> method, you can specify a custom <code>select</code> clause for the query:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'email as user_email'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The <code>distinct</code> method allows you to force the query to return distinct results:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If you already have a query builder instance and wish to add a column to its existing select clause, you may use the <code>addSelect</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">addSelect</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="raw-expressions"><a href="#raw-expressions" class="header-anchor">#</a> Raw Expressions</h2> <p>Sometimes you may need to use a raw expression in a query. To create a raw expression, you may use the <code>raw</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                     <span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'count(*) as user_count, status'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                     <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'status'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&lt;&gt;'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
                     <span class="token operator">-&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'status'</span><span class="token punctuation">)</span>
                     <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="raw-methods"><a href="#raw-methods" class="header-anchor">#</a> Raw Methods</h3> <p>Instead of using <code>fluentCrmDb()-&gt;raw</code>, you may also use the following methods to insert a raw expression into various parts of your query.</p> <h4 id="selectraw"><a href="#selectraw" class="header-anchor">#</a> <code>selectRaw</code></h4> <p>The <code>selectRaw</code> method can be used in place of <code>select(fluentCrmDb()-&gt;raw(...))</code>. This method accepts an optional array of bindings as its second argument:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$orders</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">selectRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_value * ? as price_with_tax'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.0825</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="whereraw-orwhereraw"><a href="#whereraw-orwhereraw" class="header-anchor">#</a> <code>whereRaw / orWhereRaw</code></h4> <p>The <code>whereRaw</code> and <code>orWhereRaw</code> methods can be used to inject a raw <code>where</code> clause into your query. These methods accept an optional array of bindings as their second argument:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$orders</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">whereRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_value &gt; IF(state = &quot;TX&quot;, ?, 100)'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="havingraw-orhavingraw"><a href="#havingraw-orhavingraw" class="header-anchor">#</a> <code>havingRaw / orHavingRaw</code></h4> <p>The <code>havingRaw</code> and <code>orHavingRaw</code> methods may be used to set a raw string as the value of the <code>having</code> clause. These methods accept an optional array of bindings as their second argument:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$orders</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'provider'</span><span class="token punctuation">,</span> <span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'SUM(total_order_value) as total_sales'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'provider'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">havingRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'SUM(total_order_value) &gt; ?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2500</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="orderbyraw"><a href="#orderbyraw" class="header-anchor">#</a> <code>orderByRaw</code></h4> <p>The <code>orderByRaw</code> method may be used to set a raw string as the value of the <code>order by</code> clause:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">orderByRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'updated_at - created_at DESC'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="joins"><a href="#joins" class="header-anchor">#</a> Joins</h2> <h3 id="inner-join-clause"><a href="#inner-join-clause" class="header-anchor">#</a> Inner Join Clause</h3> <p>The query builder may also be used to write join statements. To perform a basic &quot;inner join&quot;, you may use the <code>join</code> method on a query builder instance. The first argument passed to the <code>join</code> method is the name of the table you need to join to, while the remaining arguments specify the column constraints for the join. Of course, as you can see, you can join to multiple tables in a single query:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'users.id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'fc_subscribers.user_id'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers.*'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'users.phone'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="left-join-clause"><a href="#left-join-clause" class="header-anchor">#</a> left Join Clause</h3> <p>If you would like to perform a &quot;left join&quot; instead of an &quot;inner join&quot;, use the <code>leftJoin</code> method. The leftJoin method has the same signature as the join method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'users.id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'fc_subscribers.user_id'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="cross-join-clause"><a href="#cross-join-clause" class="header-anchor">#</a> Cross Join Clause</h3> <p>To perform a &quot;cross join&quot; use the <code>crossJoin</code> method with the name of the table you wish to cross join to. Cross joins generate a cartesian product between the first table and the joined table:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">crossJoin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="advanced-join-clauses"><a href="#advanced-join-clauses" class="header-anchor">#</a> Advanced Join Clauses</h3> <p>You may also specify more advanced join clauses. To get started, pass a <code>Closure</code> as the second argument into the <code>join</code> method. The <code>Closure</code> will receive a <code>JoinClause</code> object which allows you to specify constraints on the <code>join</code> clause:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$join</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$join</span><span class="token operator">-&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers.user_id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'users.id'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orOn</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>If you would like to use a &quot;where&quot; style clause on your joins, you may use the <code>where</code> and <code>orWhere</code> methods on a join. Instead of comparing two columns, these methods will compare the column against a value:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$join</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$join</span><span class="token operator">-&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers.user_id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'users.id'</span><span class="token punctuation">)</span>
                 <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users.id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="unions"><a href="#unions" class="header-anchor">#</a> Unions</h2> <p>The query builder also provides a quick way to &quot;union&quot; two queries together. For example, you may create an initial query and use the <code>union</code> method to union it with a second query:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$first</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'last_name'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token variable">$first</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="where-clauses"><a href="#where-clauses" class="header-anchor">#</a> Where Clauses</h2> <h3 id="simple-where-clauses"><a href="#simple-where-clauses" class="header-anchor">#</a> Simple Where Clauses</h3> <p>You may use the <code>where</code> method on a query builder instance to add <code>where</code> clauses to the query. The most basic call to where requires three arguments. The first argument is the name of the column. The second argument is an operator, which can be any of the database's supported operators. Finally, the third argument is the value to evaluate against the column.
For example, here is a query that verifies the value of the &quot;first_name&quot; column is equal to 'John Smith':</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'John Smith'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>For convenience, if you want to verify that a column is equal to a given value, you may pass the value directly as the second argument to the where method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'John Smith'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Of course, you may use a variety of other operators when writing a where clause:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$orders</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;='</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$orders</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&lt;&gt;'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'like'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'T%'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>You may also pass an array of conditions to the where function:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'status'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'subscribed'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&lt;&gt;'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="or-statements"><a href="#or-statements" class="header-anchor">#</a> Or Statements</h3> <p>You may chain where constraints together as well as add or clauses to the query. The <code>orWhere</code> method accepts the same arguments as the <code>where</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'like'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'john%'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'John'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="additional-where-clauses"><a href="#additional-where-clauses" class="header-anchor">#</a> Additional Where Clauses</h3> <h4 id="wherebetween"><a href="#wherebetween" class="header-anchor">#</a> whereBetween</h4> <p>The <code>whereBetween</code> method verifies that a column's value is between two values:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$orders</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
             <span class="token operator">-&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="wherenotbetween"><a href="#wherenotbetween" class="header-anchor">#</a> whereNotBetween</h4> <p>The <code>whereNotBetween</code> method verifies that a column's value lies outside two values:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$orders</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
             <span class="token operator">-&gt;</span><span class="token function">whereNotBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="wherein-wherenotin"><a href="#wherein-wherenotin" class="header-anchor">#</a> whereIn / whereNotIn</h4> <p>The <code>whereIn</code> method verifies that a given column's value is contained within the given array:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">whereIn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereNotIn</code> method verifies that the given column's value is not contained in the given array:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">whereNotIn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="wherenull-wherenotnull"><a href="#wherenull-wherenotnull" class="header-anchor">#</a> whereNull / whereNotNull</h4> <p>The <code>whereNull</code> method verifies that the value of the given column is NULL:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'updated_at'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereNotNull</code> method verifies that the column's value is not NULL:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">whereNotNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'updated_at'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="wheredate-wheremonth-whereday-whereyear-wheretime"><a href="#wheredate-wheremonth-whereday-whereyear-wheretime" class="header-anchor">#</a> whereDate / whereMonth / whereDay / whereYear / whereTime</h4> <p>The <code>whereDate</code> method may be used to compare a column's value against a date:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">whereDate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'2016-12-31'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereMonth</code> method may be used to compare a column's value against a specific month of a year:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">whereMonth</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'12'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereDay</code> method may be used to compare a column's value against a specific day of a month:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">whereDay</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'21'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereYear</code> method may be used to compare a column's value against a specific year:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">whereYear</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'2022'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereTime</code> method may be used to compare a column's value against a specific time:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">whereTime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'11:20:45'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereTimestamp</code> method may be used to compare a column's value against a specific time:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">whereTimestamp</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'2022-11-21 11:20:45'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="wherecolumn"><a href="#wherecolumn" class="header-anchor">#</a> whereColumn</h4> <p>The <code>whereColumn</code> method may be used to verify that two columns are equal:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                 <span class="token operator">-&gt;</span><span class="token function">whereColumn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'last_name'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You may also pass a comparison operator to the method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                 <span class="token operator">-&gt;</span><span class="token function">whereColumn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'updated_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The <code>whereColumn</code> method can also be passed an array of multiple conditions. These conditions will be joined using the and operator:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                 <span class="token operator">-&gt;</span><span class="token function">whereColumn</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                    <span class="token punctuation">[</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'last_name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token punctuation">[</span><span class="token string single-quoted-string">'updated_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">]</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="where-exists-clauses"><a href="#where-exists-clauses" class="header-anchor">#</a> Where Exists Clauses</h3> <p>The <code>whereExists</code> method allows you to write where exists SQL clauses. The <code>whereExists</code> method accepts a <code>Closure</code> argument, which will receive a query builder instance allowing you to define the query that should be placed inside the &quot;exists&quot; clause:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">whereExists</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                      <span class="token operator">-&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span>
                      <span class="token operator">-&gt;</span><span class="token function">whereRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations.subscriber_id = fc_subscribers.id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The query above will produce the following SQL:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> fc_subscribers
<span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> fc_contact_relations <span class="token keyword">where</span> fc_contact_relations<span class="token punctuation">.</span>subscriber_id <span class="token operator">=</span> fc_subscribers<span class="token punctuation">.</span>id
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ordering-grouping-limit-offset"><a href="#ordering-grouping-limit-offset" class="header-anchor">#</a> Ordering, Grouping, Limit, &amp; Offset</h3> <h4 id="orderby"><a href="#orderby" class="header-anchor">#</a> orderBy</h4> <p>The <code>orderBy</code> method allows you to sort the result of the query by a given column. The first argument to the <code>orderBy</code> method should be the column you wish to sort by, while the second argument controls the direction of the sort and may be either <code>asc</code> or <code>desc</code>:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                 <span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'DESC'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="latest-oldest"><a href="#latest-oldest" class="header-anchor">#</a> latest / oldest</h4> <p>The <code>latest</code> and <code>oldest</code> methods allow you to easily order results by date. By default, result will be ordered by the <code>created_at</code> column. Or, you may pass the column name that you wish to sort by:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                 <span class="token operator">-&gt;</span><span class="token function">latest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="inrandomorder"><a href="#inrandomorder" class="header-anchor">#</a> inRandomOrder</h4> <p>The <code>inRandomOrder</code> method may be used to sort the query results randomly. For example, you may use this method to fetch a random user:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                 <span class="token operator">-&gt;</span><span class="token function">inRandomOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="groupby-having"><a href="#groupby-having" class="header-anchor">#</a> groupBy / having</h4> <p>The <code>groupBy</code> and <code>having</code> methods may be used to group the query results. The <code>having</code> method's signature is similar to that of the <code>where</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">having</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>You may pass multiple arguments to the <code>groupBy</code> method to group by multiple columns:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'status'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">having</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="skip-take"><a href="#skip-take" class="header-anchor">#</a> skip / take</h4> <p>To limit the number of results returned from the query, or to skip a given number of results in the query, you may use the <code>skip</code> and <code>take</code> methods:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Alternatively, you may use the <code>limit</code> and <code>offset</code> methods:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="conditional-clauses"><a href="#conditional-clauses" class="header-anchor">#</a> Conditional Clauses</h3> <p>Sometimes you may want clauses to apply to a query only when something else is true. For instance, you may only want to apply a <code>where</code> statement if a given input value is present on the incoming request. You may accomplish this using <code>when</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user_id'</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The <code>when</code> method only executes the given <code>Closure</code> when the first parameter is <code>true</code>. If the first parameter is <code>false</code>, the Closure will not be executed.</p> <p>You may pass another Closure as the third parameter to the <code>when</code> method. This Closure will execute if the first parameter evaluates as <code>false</code>. To illustrate how this feature may be used, we will use it to configure the default sorting of a query:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$sortBy</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
 
<span class="token variable">$subscribers</span> <span class="token operator">=</span> <span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_subscribers'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token variable">$sortBy</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$sortBy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token variable">$sortBy</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="inserts"><a href="#inserts" class="header-anchor">#</a> Inserts</h3> <p>The query builder also provides an <code>insert</code> method for inserting records into the database table. The <code>insert</code> method accepts an array of column names and values:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_tags'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tag 1'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'description'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'This is tag 1'</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You may even insert several records into the table with a single call to <code>insert</code> by passing an array of arrays. Each array represents a row to be inserted into the table:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_tags'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tag 1'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'description'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'This is tag 1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tag 2'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'description'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'This is tag 2'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="auto-incrementing-ids"><a href="#auto-incrementing-ids" class="header-anchor">#</a> Auto-Incrementing IDs</h4> <p>If the table has an auto-incrementing id, use the <code>insertGetId</code> method to insert a record and then retrieve the ID:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_tags'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insertGetId</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tag 1'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'description'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'This is tag 1'</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="updates"><a href="#updates" class="header-anchor">#</a> Updates</h3> <p>Of course, in addition to inserting records into the database, the query builder can also update existing records using the <code>update</code> method. The <code>update</code> method, like the <code>insert</code> method, accepts an array of column and value pairs containing the columns to be updated. You may constrain the <code>update</code> query using <code>where</code> clauses:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_tags'</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Tag no. 1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="increment-decrement"><a href="#increment-decrement" class="header-anchor">#</a> Increment &amp; Decrement</h3> <p>The query builder also provides convenient methods for incrementing or decrementing the value of a given column. This is a shortcut, providing a more expressive and terse interface compared to manually writing the <code>update</code> statement.</p> <p>Both of these methods accept at least one argument: the column to modify. A second argument may optionally be passed to control the amount by which the column should be incremented or decremented:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>You may also specify additional columns to update during the operation:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'total_order_value'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'99.99'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="deletes"><a href="#deletes" class="header-anchor">#</a> Deletes</h3> <p>The query builder may also be used to delete records from the table via the <code>delete</code> method. You may constrain delete statements by adding where clauses before calling the <code>delete</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>If you wish to truncate the entire table, which will remove all rows and reset the auto-incrementing ID to zero, you may use the <code>truncate</code> method:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="pessimistic-locking"><a href="#pessimistic-locking" class="header-anchor">#</a> Pessimistic Locking</h3> <p>The query builder also includes a few functions to help you do &quot;pessimistic locking&quot; on your <code>select</code> statements. To run the statement with a &quot;shared lock&quot;, you may use the <code>sharedLock</code> method on a query. A shared lock prevents the selected rows from being modified until your transaction commits:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">sharedLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Alternatively, you may use the <code>lockForUpdate</code> method. A &quot;for update&quot; lock prevents the rows from being modified or from being selected with another shared lock:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">fluentCrmDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fc_contact_relations'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'total_order_count'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">lockForUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fluentcrm/fluent-crm-developers-docs/edit/master/src/database/query-builder.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/23/2022, 5:03:33 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/database/models/" class="prev">
        Model Basic
      </a></span> <span class="next"><a href="/database/models/campaign/">
        Campaign Model
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1cc69afb.js" defer></script><script src="/assets/js/4.50f88fe4.js" defer></script><script src="/assets/js/40.19b3e816.js" defer></script><script src="/assets/js/5.78087223.js" defer></script>
  </body>
</html>
